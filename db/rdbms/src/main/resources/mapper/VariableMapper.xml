<?xml version="1.0" encoding="UTF-8" ?>
<!--
  ~ Copyright Camunda Services GmbH and/or licensed to Camunda Services GmbH under
  ~ one or more contributor license agreements. See the NOTICE file distributed
  ~ with this work for additional information regarding copyright ownership.
  ~ Licensed under the Camunda License 1.0. You may not use this file
  ~ except in compliance with the Camunda License 1.0.
  -->
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="io.camunda.db.rdbms.sql.VariableMapper">
  <select id="exists" parameterType="java.lang.Long" resultType="boolean">
    SELECT EXISTS(
      SELECT 1
      FROM VARIABLE
      WHERE VAR_KEY = #{key}
    )
  </select>

  <select id="findOne" parameterType="java.lang.Long" resultType="io.camunda.db.rdbms.domain.VariableModel">
    SELECT
      VAR_KEY,
      PROCESS_INSTANCE_KEY,
      SCOPE_KEY,
      VAR_NAME,
      VAR_VALUE,
      TRUNCATED,
      TENANT_ID
    FROM
      VARIABLE
    WHERE VAR_KEY = #{key}
  </select>

  <insert
    id="insert"
    parameterType="io.camunda.db.rdbms.domain.VariableModel"
    flushCache="true"
    timeout="20">
    INSERT INTO VARIABLE (VAR_KEY, PROCESS_INSTANCE_KEY, SCOPE_KEY, VAR_NAME, VAR_VALUE, TRUNCATED, TENANT_ID)
    VALUES (#{key}, #{processInstanceKey}, #{scopeKey}, #{name}, #{value}, #{truncated}, #{tenantId})
  </insert>
</mapper>
